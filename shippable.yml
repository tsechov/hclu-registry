sudo: false
language: scala
scala:
    - 2.11.6

node_js:
  - 0.12.2

jdk:
   - oraclejdk8

before_install:
  - mkdir -p shippable/testresults
  - sudo apt-get -y install libfontconfig man
  - source ~/.nvm/nvm.sh && nvm install 0.12.2
  - node --version
  - npm --version
  - npm install -g grunt-cli bower
  - sudo add-apt-repository -y ppa:webupd8team/java
  - sudo apt-get update -y
  - echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections
  - apt-get install -y oracle-java8-installer
  - curl -sLO https://repo.typesafe.com/typesafe/ivy-releases/org.scala-sbt/sbt-launch/0.13.8/sbt-launch.jar && mkdir -p ~/bin && mv ./sbt-launch.jar ~/bin
  - echo -e '#!/bin/bash\nSBT_OPTS="-Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled"\njava $SBT_OPTS -jar `dirname $0`/sbt-launch.jar "$@"' > ~/bin/sbt
  - chmod u+x ~/bin/sbt
  - cd ui && npm install && bower --allow-root install && cd ..
  - sbt clean

script:
  - sbt test